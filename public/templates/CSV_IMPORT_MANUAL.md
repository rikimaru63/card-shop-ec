# 商品CSVインポートマニュアル

## 概要
このマニュアルでは、商品データをCSVファイルでインポートする際の入力形式について説明します。

---

## CSVファイル形式

- **文字コード**: UTF-8 (BOM付き推奨)
- **区切り文字**: カンマ (,)
- **改行コード**: LF または CRLF
- **引用符**: ダブルクォート (") - カンマや改行を含む値に使用

---

## カラム一覧

| カラム名 | 必須 | 説明 |
|---------|------|------|
| name | ◯ | 商品名 |
| cardType | - | カードゲームの種類 |
| productType | - | 商品タイプ |
| cardSet | - | パック名/シリーズ名 |
| cardNumber | - | カード番号 |
| rarity | - | レアリティ |
| condition | - | 商品状態 |
| price | ◯ | 価格 |
| stock | - | 在庫数 |
| description | - | 商品説明 |

---

## 各カラムの詳細

### 1. name（商品名）【必須】

商品の名前を入力します。

**入力例:**
```
Charizard VMAX SSR
リザードンVMAX SSR
ピカチュウ SAR
Monkey D. Luffy Leader
```

**注意事項:**
- カンマを含む場合はダブルクォートで囲む: `"Charizard VMAX, Special Art"`
- ダブルクォートを含む場合は2つ重ねる: `"Charizard ""Special"" Edition"`

---

### 2. cardType（カードタイプ）

カードゲームの種類を指定します。

| 入力値 | 説明 |
|--------|------|
| `pokemon` | ポケモンカード |
| `onepiece` | ワンピースカード |

**デフォルト値:** `pokemon`（未入力の場合）

**入力例:**
```
pokemon
onepiece
```

---

### 3. productType（商品タイプ）

商品の形態を指定します。

| 入力値 | 別名（日本語も可） | 説明 |
|--------|-------------------|------|
| `SINGLE` | シングル, カード | シングルカード |
| `BOX` | ボックス, パック | BOX/パック商品 |

**デフォルト値:** `SINGLE`（未入力の場合）

**入力例:**
```
SINGLE
BOX
シングル
ボックス
```

---

### 4. cardSet（パック名/シリーズ名）

カードが収録されているパック名やシリーズ名を入力します。

#### ポケモンカード パック名一覧

**SVシリーズ:**
| 入力値 | 英語名 |
|--------|--------|
| `スカーレットex` | Scarlet ex |
| `バイオレットex` | Violet ex |
| `トリプレットビート` | Triplet Beat |
| `スノーハザード` | Snow Hazard |
| `クレイバースト` | Clay Burst |
| `151` | Pokemon 151 |
| `レイジングサーフ` | Raging Surf |
| `古代の咆哮` | Ancient Roar |
| `未来の一閃` | Future Flash |
| `シャイニートレジャーex` | Shiny Treasure ex |
| `ワイルドフォース` | Wild Force |
| `サイバージャッジ` | Cyber Judge |
| `クリムゾンヘイズ` | Crimson Haze |
| `変幻の仮面` | Mask of Change |
| `ステラミラクル` | Stellar Miracle |
| `超電ブレイカー` | - |
| `テラスタルフェス` | Terastal Fest |
| `バトルパートナーズ` | Battle Partners |
| `楽園ドラゴーナ` | - |
| `ナイトワンダラー` | Night Wanderer |

**ソード＆シールド シリーズ:**
| 入力値 | 備考 |
|--------|------|
| `VSTARユニバース` | |
| `ハイクラスパック` | |
| `パラダイムトリガー` | |
| `白銀のランス` | |
| `漆黒のガイスト` | |
| `白銀のランス/漆黒のガイスト` | 複合パック |
| `イーブイヒーローズ` | |
| `蒼空ストリーム` | |
| `摩天パーフェクト` | |
| `フュージョンアーツ` | |
| `スターバース` | |
| `ダークファンタズマ` | |
| `スターバース/ダークファンタズマ` | 複合パック |
| `タイムゲイザー` | |
| `スペースジャグラー` | |
| `タイムゲイザー/スペースジャグラー` | 複合パック |
| `ロストアビス` | |
| `ポケモンGO` | |

**サン＆ムーン シリーズ:**
| 入力値 | 備考 |
|--------|------|
| `GXウルトラシャイニー` | |
| `タッグボルト` | |
| `ダブルブレイズ` | |
| `ナイトユニゾン` | |
| `迅雷スパーク` | |
| `ドリームリーグ` | |
| `オルタージェネシス` | |

**その他・特別パック:**
| 入力値 | 備考 |
|--------|------|
| `スタートデッキ` | |
| `GXスタートデッキ` | |
| `バトルマスターデッキ` | |
| `ポケモンカード Classic` | |
| `シンジュ団` | |
| `ダイヤモンド団` | |
| `ワイルドフォース/サイバージャッジ` | 複合パック |
| `古代の咆哮/未来の一閃` | 複合パック |
| `プロモーションカード` | |
| `その他` | 上記以外 |

#### ワンピースカード パック名一覧

| 入力値 | 説明 |
|--------|------|
| `ROMANCE DAWN【OP-01】` | 第1弾 |
| `頂上決戦【OP-02】` | 第2弾 |
| `強大な敵【OP-03】` | 第3弾 |
| `謀略の王国【OP-04】` | 第4弾 |
| `新時代の主役【OP-05】` | 第5弾 |
| `双璧の覇者【OP-06】` | 第6弾 |
| `500年後の未来【OP-07】` | 第7弾 |
| `二つの伝説【OP-08】` | 第8弾 |

**入力例:**
```
スカーレットex
ROMANCE DAWN【OP-01】
151
```

---

### 5. cardNumber（カード番号）

カードの収録番号を入力します。

**入力例:**
```
025/165
001/078
OP01-001
S-001
```

---

### 6. rarity（レアリティ）

カードのレアリティを指定します。

| 入力値 | 別名（日本語も可） | 説明 |
|--------|-------------------|------|
| `COMMON` | C, コモン | コモン |
| `UNCOMMON` | U, アンコモン | アンコモン |
| `RARE` | R, RR, RRR, レア | レア |
| `SUPER_RARE` | SR, スーパーレア | スーパーレア |
| `ULTRA_RARE` | UR, ウルトラレア | ウルトラレア |
| `SECRET_RARE` | SAR, SEC, AR, CHR, CSR, シークレット | シークレットレア |
| `PROMO` | プロモ | プロモカード |

**入力例:**
```
SECRET_RARE
SR
SAR
RARE
R
```

**注意:** BOX商品など、レアリティが該当しない場合は空欄にしてください。

---

### 7. condition（商品状態）

商品のコンディションを指定します。

| 入力値 | 別名（日本語も可） | 説明 |
|--------|-------------------|------|
| `GRADE_A` | A, A：美品, 美品 | 美品（傷なし） |
| `GRADE_B` | B, B：良品, 良品 | 良品（軽微な傷あり） |
| `GRADE_C` | C, C：ダメージ, ダメージ | ダメージあり |
| `PSA` | PSA | PSA鑑定品 |
| `SEALED` | 未開封 | 未開封品 |

**デフォルト値:** `GRADE_A`（未入力の場合）

**入力例:**
```
GRADE_A
A
美品
SEALED
未開封
PSA
```

---

### 8. price（価格）【必須】

商品の販売価格を数値で入力します。

**入力形式:**
- 半角数字のみ
- 円マーク(¥)やカンマ(,)は自動で除去されます
- 小数点以下は切り捨て

**入力例:**
```
89800
45000
12800
¥3,500  ← 自動で3500として処理
```

**注意:** 0以下の価格はエラーになります。

---

### 9. stock（在庫数）

在庫数を数値で入力します。

**デフォルト値:** `0`（未入力の場合）

**入力例:**
```
1
5
10
```

---

### 10. description（商品説明）

商品の詳細説明を入力します。

**入力例:**
```
スカーレットex収録のリザードンVMAX SSR。状態良好。
ポケモン151 未開封BOX
```

**注意事項:**
- 改行を含む場合はダブルクォートで囲む
- カンマを含む場合もダブルクォートで囲む

---

## サンプルCSV

```csv
name,cardType,productType,cardSet,cardNumber,rarity,condition,price,stock,description
"Charizard VMAX SSR",pokemon,SINGLE,スカーレットex,025/165,SECRET_RARE,GRADE_A,89800,1,"スカーレットex収録のリザードンVMAX SSR。状態良好。"
"Pikachu SAR",pokemon,SINGLE,バイオレットex,001/078,SECRET_RARE,GRADE_A,45000,2,"バイオレットex収録のピカチュウSAR。美品。"
"Pokemon 151 Booster Box",pokemon,BOX,151,,,,12800,5,"ポケモン151 未開封BOX"
"Monkey D. Luffy Leader",onepiece,SINGLE,ROMANCE DAWN【OP-01】,OP01-001,SUPER_RARE,GRADE_A,3500,3,"ルフィのリーダーカード"
"One Piece OP-01 Box",onepiece,BOX,ROMANCE DAWN【OP-01】,,,SEALED,8900,2,"OP-01 未開封BOX"
```

---

## インポート時の動作

### 新規登録と更新の判定

- **商品名（name）が一致する商品が存在する場合**: 既存商品を更新
- **商品名が一致する商品が存在しない場合**: 新規登録

### 自動生成される項目

以下の項目はシステムが自動生成します（CSVに含める必要はありません）:

| 項目 | 説明 |
|------|------|
| SKU | 商品管理コード（例: PKM-123456, OPC-789012） |
| slug | URL用のスラッグ（商品名から自動生成） |
| カテゴリ | cardTypeに基づいて自動設定 |

---

## よくあるエラーと対処法

| エラーメッセージ | 原因 | 対処法 |
|-----------------|------|--------|
| 商品名が空です | name列が空 | 商品名を入力してください |
| 価格が無効です | price列が0以下または数値でない | 正の数値を入力してください |
| 必須カラムが見つかりません | ヘッダー行にnameまたはpriceがない | ヘッダー行を確認してください |

---

## 注意事項

1. **文字コード**: UTF-8で保存してください（Excelで編集した場合はBOM付きUTF-8で保存）
2. **ヘッダー行**: 1行目は必ずヘッダー行として認識されます
3. **空行**: 空行はスキップされます
4. **大文字小文字**: cardType, productType, rarity, conditionは大文字小文字を区別しません

---

## お問い合わせ

インポートに関するご質問は管理者までお問い合わせください。
