# ã‚·ã‚¹ãƒ†ãƒ å¼•ãç¶™ããƒ‰ã‚­ãƒ¥ãƒ¡ãƒ³ãƒˆ - Pokemon Card Shop

**ãƒ—ãƒ­ã‚¸ã‚§ã‚¯ãƒˆå**: Card Shop EC  
**ä½œæˆæ—¥**: 2025-11-19  
**æœ€çµ‚æ›´æ–°**: 2025-11-19  
**ãƒãƒ¼ã‚¸ãƒ§ãƒ³**: 0.1.0  
**å¯¾è±¡è€…**: æ–°è¦é–‹ç™ºè€…ã€ä¿å®ˆæ‹…å½“è€…

---

## ğŸ“‹ ç›®æ¬¡

1. [ãƒ—ãƒ­ã‚¸ã‚§ã‚¯ãƒˆæ¦‚è¦](#1-ãƒ—ãƒ­ã‚¸ã‚§ã‚¯ãƒˆæ¦‚è¦)
2. [ã‚·ã‚¹ãƒ†ãƒ ã‚¢ãƒ¼ã‚­ãƒ†ã‚¯ãƒãƒ£](#2-ã‚·ã‚¹ãƒ†ãƒ ã‚¢ãƒ¼ã‚­ãƒ†ã‚¯ãƒãƒ£)
3. [é–‹ç™ºç’°å¢ƒã‚»ãƒƒãƒˆã‚¢ãƒƒãƒ—](#3-é–‹ç™ºç’°å¢ƒã‚»ãƒƒãƒˆã‚¢ãƒƒãƒ—)
4. [ãƒ‡ã‚£ãƒ¬ã‚¯ãƒˆãƒªæ§‹æˆ](#4-ãƒ‡ã‚£ãƒ¬ã‚¯ãƒˆãƒªæ§‹æˆ)
5. [ä¸»è¦æ©Ÿèƒ½ã¨å®Ÿè£…](#5-ä¸»è¦æ©Ÿèƒ½ã¨å®Ÿè£…)
6. [ãƒ‡ãƒ¼ã‚¿ãƒ™ãƒ¼ã‚¹è¨­è¨ˆ](#6-ãƒ‡ãƒ¼ã‚¿ãƒ™ãƒ¼ã‚¹è¨­è¨ˆ)
7. [APIä»•æ§˜](#7-apiä»•æ§˜)
8. [ãƒ‡ãƒ—ãƒ­ã‚¤æ‰‹é †](#8-ãƒ‡ãƒ—ãƒ­ã‚¤æ‰‹é †)
9. [é‹ç”¨ç®¡ç†](#9-é‹ç”¨ç®¡ç†)
10. [ãƒˆãƒ©ãƒ–ãƒ«ã‚·ãƒ¥ãƒ¼ãƒ†ã‚£ãƒ³ã‚°](#10-ãƒˆãƒ©ãƒ–ãƒ«ã‚·ãƒ¥ãƒ¼ãƒ†ã‚£ãƒ³ã‚°)

---

## 1. ãƒ—ãƒ­ã‚¸ã‚§ã‚¯ãƒˆæ¦‚è¦

### 1.1 ãƒ—ãƒ­ã‚¸ã‚§ã‚¯ãƒˆæƒ…å ±

| é …ç›® | å†…å®¹ |
|-----|------|
| **ãƒ—ãƒ­ã‚¸ã‚§ã‚¯ãƒˆå** | Card Shop EC (Pokemon Card Shop) |
| **ç›®çš„** | ãƒã‚±ãƒ¢ãƒ³ã‚«ãƒ¼ãƒ‰ã®ã‚ªãƒ³ãƒ©ã‚¤ãƒ³è²©å£²ãƒ—ãƒ©ãƒƒãƒˆãƒ•ã‚©ãƒ¼ãƒ  |
| **å¯¾è±¡å¸‚å ´** | è‹±èªåœï¼ˆå¤šè¨€èªå¯¾å¿œäºˆå®šï¼šè‹±èªãƒ»æ—¥æœ¬èªï¼‰ |
| **ä¸»è¦æ©Ÿèƒ½** | å•†å“é–²è¦§ã€ã‚«ãƒ¼ãƒˆã€æ±ºæ¸ˆã€ç®¡ç†ç”»é¢ã€CSVä¸€æ‹¬ç™»éŒ² |
| **æœ¬ç•ªURL** | https://card-shop-ec-orpin.vercel.app |
| **ãƒªãƒã‚¸ãƒˆãƒª** | https://github.com/rikimaru63/card-shop-ec |
| **ãƒ­ãƒ¼ã‚«ãƒ«ãƒ‘ã‚¹** | `C:\Users\admin\Desktop\é–‹ç™º\card_hp\my-awesome-project\card-shop-ec` |

### 1.2 æŠ€è¡“ã‚¹ã‚¿ãƒƒã‚¯

#### ãƒ•ãƒ­ãƒ³ãƒˆã‚¨ãƒ³ãƒ‰
- **ãƒ•ãƒ¬ãƒ¼ãƒ ãƒ¯ãƒ¼ã‚¯**: Next.js 14.0.4 (App Router)
- **è¨€èª**: TypeScript 5.3.3
- **UIãƒ©ã‚¤ãƒ–ãƒ©ãƒª**: 
  - Shadcn/UI (Radix UI ãƒ™ãƒ¼ã‚¹)
  - Tailwind CSS 3.4.0
- **çŠ¶æ…‹ç®¡ç†**: 
  - Zustand 4.5.7 (ã‚«ãƒ¼ãƒˆãƒ»ã‚¦ã‚£ãƒƒã‚·ãƒ¥ãƒªã‚¹ãƒˆ)
  - React Query (ãƒ‡ãƒ¼ã‚¿ãƒ•ã‚§ãƒƒãƒ)
- **ãƒ•ã‚©ãƒ¼ãƒ **: React Hook Form 7.48.2 + Zod 3.22.4

#### ãƒãƒƒã‚¯ã‚¨ãƒ³ãƒ‰
- **ãƒ•ãƒ¬ãƒ¼ãƒ ãƒ¯ãƒ¼ã‚¯**: Next.js API Routes
- **èªè¨¼**: NextAuth.js 4.24.13
- **ORM**: Prisma 5.7.1
- **ãƒ‡ãƒ¼ã‚¿ãƒ™ãƒ¼ã‚¹**: Supabase (PostgreSQL 15)

#### ã‚¤ãƒ³ãƒ•ãƒ©
- **ãƒ›ã‚¹ãƒ†ã‚£ãƒ³ã‚°**: Vercel
- **ãƒ‡ãƒ¼ã‚¿ãƒ™ãƒ¼ã‚¹**: Supabase
- **ãƒãƒ¼ã‚¸ãƒ§ãƒ³ç®¡ç†**: Git + GitHub
- **CI/CD**: Vercelè‡ªå‹•ãƒ‡ãƒ—ãƒ­ã‚¤

### 1.3 ä¸»è¦ä¾å­˜ãƒ‘ãƒƒã‚±ãƒ¼ã‚¸

```json
{
  "next": "14.0.4",
  "react": "^18.2.0",
  "typescript": "^5.3.3",
  "@prisma/client": "^5.7.1",
  "next-auth": "^4.24.13",
  "zustand": "^4.5.7",
  "tailwindcss": "^3.4.0"
}
```

---

## 2. ã‚·ã‚¹ãƒ†ãƒ ã‚¢ãƒ¼ã‚­ãƒ†ã‚¯ãƒãƒ£

### 2.1 å…¨ä½“æ§‹æˆå›³

```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚                      Frontend (Next.js)                  â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â” â”‚
â”‚  â”‚   Pages      â”‚  â”‚  Components  â”‚  â”‚    Stores    â”‚ â”‚
â”‚  â”‚ (App Router) â”‚  â”‚  (Shadcn/UI) â”‚  â”‚  (Zustand)   â”‚ â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜ â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
                          â”‚
                          â”‚ HTTP/REST
                          â”‚
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â–¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚                  Backend (Next.js API)                   â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”  â”‚
â”‚  â”‚  API Routes                                       â”‚  â”‚
â”‚  â”‚  - /api/products (GET, POST)                     â”‚  â”‚
â”‚  â”‚  - /api/products/[id] (GET, PUT, DELETE)         â”‚  â”‚
â”‚  â”‚  - /api/admin/products (Admin CRUD)              â”‚  â”‚
â”‚  â”‚  - /api/auth/[...nextauth] (NextAuth)            â”‚  â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜  â”‚
â”‚                         â”‚ Prisma ORM                    â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
                          â”‚
                          â”‚ PostgreSQL Protocol
                          â”‚
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â–¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚              Supabase (PostgreSQL Database)              â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”  â”‚
â”‚  â”‚  Tables:                                          â”‚  â”‚
â”‚  â”‚  - Product (å•†å“)                                 â”‚  â”‚
â”‚  â”‚  - Category (ã‚«ãƒ†ã‚´ãƒª)                            â”‚  â”‚
â”‚  â”‚  - User (ãƒ¦ãƒ¼ã‚¶ãƒ¼)                                â”‚  â”‚
â”‚  â”‚  - Order (æ³¨æ–‡)                                   â”‚  â”‚
â”‚  â”‚  - Cart (ã‚«ãƒ¼ãƒˆ)                                  â”‚  â”‚
â”‚  â”‚  - Wishlist (ã‚¦ã‚£ãƒƒã‚·ãƒ¥ãƒªã‚¹ãƒˆ)                    â”‚  â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜  â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

### 2.2 ãƒ‡ãƒ¼ã‚¿ãƒ•ãƒ­ãƒ¼

#### å•†å“è¡¨ç¤ºãƒ•ãƒ­ãƒ¼
```
1. ãƒ¦ãƒ¼ã‚¶ãƒ¼ãŒãƒ›ãƒ¼ãƒ ãƒšãƒ¼ã‚¸ã«ã‚¢ã‚¯ã‚»ã‚¹
   â†“
2. ProductGrid ã‚³ãƒ³ãƒãƒ¼ãƒãƒ³ãƒˆãŒãƒã‚¦ãƒ³ãƒˆ
   â†“
3. useEffect ã§ /api/products ã‚’ fetch
   â†“
4. API ãŒ PrismaçµŒç”±ã§Supabaseã«ã‚¯ã‚¨ãƒª
   â†“
5. å•†å“ãƒ‡ãƒ¼ã‚¿ï¼ˆ12ä»¶ï¼‰ã‚’å–å¾—
   â†“
6. ãƒ•ãƒ­ãƒ³ãƒˆã‚¨ãƒ³ãƒ‰ã§ãƒ¬ãƒ³ãƒ€ãƒªãƒ³ã‚°
```

#### ã‚«ãƒ¼ãƒˆè¿½åŠ ãƒ•ãƒ­ãƒ¼
```
1. ãƒ¦ãƒ¼ã‚¶ãƒ¼ãŒã€ŒAddã€ãƒœã‚¿ãƒ³ã‚’ã‚¯ãƒªãƒƒã‚¯
   â†“
2. handleAddToCart é–¢æ•°ãŒå®Ÿè¡Œ
   â†“
3. useCartStore ã® addItem ã‚’å‘¼ã³å‡ºã—
   â†“
4. Zustand ãŒçŠ¶æ…‹ã‚’æ›´æ–°
   â†“
5. localStorage ã«æ°¸ç¶šåŒ– (cart-storage)
   â†“
6. Header ã‚³ãƒ³ãƒãƒ¼ãƒãƒ³ãƒˆãŒè‡ªå‹•å†ãƒ¬ãƒ³ãƒ€ãƒªãƒ³ã‚°
   â†“
7. ã‚«ãƒ¼ãƒˆãƒãƒƒã‚¸ãŒæ›´æ–°
```

### 2.3 èªè¨¼ãƒ•ãƒ­ãƒ¼

```
1. ãƒ¦ãƒ¼ã‚¶ãƒ¼ãŒ /auth/signin ã«ã‚¢ã‚¯ã‚»ã‚¹
   â†“
2. NextAuth ã® SignIn ãƒšãƒ¼ã‚¸è¡¨ç¤º
   â†“
3. ãƒ¡ãƒ¼ãƒ«ãƒ»ãƒ‘ã‚¹ãƒ¯ãƒ¼ãƒ‰å…¥åŠ›
   â†“
4. /api/auth/[...nextauth] ã« POST
   â†“
5. Credentials Provider ãŒèªè¨¼å‡¦ç†
   â†“
6. bcrypt ã§ãƒ‘ã‚¹ãƒ¯ãƒ¼ãƒ‰æ¤œè¨¼
   â†“
7. JWT ãƒˆãƒ¼ã‚¯ãƒ³ç™ºè¡Œ
   â†“
8. Cookie ã«ã‚»ãƒƒã‚·ãƒ§ãƒ³ä¿å­˜
   â†“
9. ãƒ¦ãƒ¼ã‚¶ãƒ¼ãƒšãƒ¼ã‚¸ã«ãƒªãƒ€ã‚¤ãƒ¬ã‚¯ãƒˆ
```

---

## 3. é–‹ç™ºç’°å¢ƒã‚»ãƒƒãƒˆã‚¢ãƒƒãƒ—

### 3.1 å¿…è¦ãªãƒ„ãƒ¼ãƒ«

| ãƒ„ãƒ¼ãƒ« | ãƒãƒ¼ã‚¸ãƒ§ãƒ³ | ç”¨é€” | ã‚¤ãƒ³ã‚¹ãƒˆãƒ¼ãƒ«æ–¹æ³• |
|--------|-----------|------|-----------------|
| **Node.js** | v22.17.0 ä»¥ä¸Š | JavaScriptå®Ÿè¡Œç’°å¢ƒ | https://nodejs.org/ |
| **npm** | 11.6.2 ä»¥ä¸Š | ãƒ‘ãƒƒã‚±ãƒ¼ã‚¸ãƒãƒãƒ¼ã‚¸ãƒ£ãƒ¼ | Node.js ã«åŒæ¢± |
| **Git** | 2.50.0 ä»¥ä¸Š | ãƒãƒ¼ã‚¸ãƒ§ãƒ³ç®¡ç† | https://git-scm.com/ |
| **VS Code** | æœ€æ–° | ã‚¨ãƒ‡ã‚£ã‚¿ï¼ˆæ¨å¥¨ï¼‰ | https://code.visualstudio.com/ |
| **Supabase CLI** | 2.58.5 ä»¥ä¸Š | DBç®¡ç†ï¼ˆã‚ªãƒ—ã‚·ãƒ§ãƒ³ï¼‰ | `npm install -g supabase` |

### 3.2 åˆå›ã‚»ãƒƒãƒˆã‚¢ãƒƒãƒ—æ‰‹é †

#### ã‚¹ãƒ†ãƒƒãƒ—1: ãƒªãƒã‚¸ãƒˆãƒªã®ã‚¯ãƒ­ãƒ¼ãƒ³

```bash
# ä½œæ¥­ãƒ‡ã‚£ãƒ¬ã‚¯ãƒˆãƒªã«ç§»å‹•
cd C:\Users\admin\Desktop\é–‹ç™º\card_hp\my-awesome-project

# ãƒªãƒã‚¸ãƒˆãƒªã‚’ã‚¯ãƒ­ãƒ¼ãƒ³ï¼ˆæ—¢å­˜ã®å ´åˆã¯ã‚¹ã‚­ãƒƒãƒ—ï¼‰
git clone https://github.com/rikimaru63/card-shop-ec.git
cd card-shop-ec

# ã¾ãŸã¯æ—¢å­˜ã®ãƒ‡ã‚£ãƒ¬ã‚¯ãƒˆãƒªã§æœ€æ–°åŒ–
git pull origin master
```

#### ã‚¹ãƒ†ãƒƒãƒ—2: ä¾å­˜ãƒ‘ãƒƒã‚±ãƒ¼ã‚¸ã®ã‚¤ãƒ³ã‚¹ãƒˆãƒ¼ãƒ«

```bash
# Node modules ã‚’ã‚¤ãƒ³ã‚¹ãƒˆãƒ¼ãƒ«
npm install

# Prisma ã‚¯ãƒ©ã‚¤ã‚¢ãƒ³ãƒˆã‚’ç”Ÿæˆ
npm run db:generate
```

**æƒ³å®šå‡ºåŠ›**:
```
added 574 packages in 45s
âœ” Generated Prisma Client
```

#### ã‚¹ãƒ†ãƒƒãƒ—3: ç’°å¢ƒå¤‰æ•°ã®è¨­å®š

```bash
# .env.local ãƒ•ã‚¡ã‚¤ãƒ«ã‚’ä½œæˆï¼ˆæ—¢å­˜ã®å ´åˆã¯ç¢ºèªã®ã¿ï¼‰
# ä»¥ä¸‹ã®å†…å®¹ã‚’ã‚³ãƒ”ãƒ¼
```

**`.env.local` ã®å†…å®¹**:
```env
# Supabase Configuration
NEXT_PUBLIC_SUPABASE_URL="https://rzxbwmxkmrseyobmffkn.supabase.co"
NEXT_PUBLIC_SUPABASE_ANON_KEY="eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJpc3MiOiJzdXBhYmFzZSIsInJlZiI6InJ6eGJ3bXhrbXJzZXlvYm1mZmtuIiwicm9sZSI6ImFub24iLCJpYXQiOjE3NjMyNjU0NzEsImV4cCI6MjA3ODg0MTQ3MX0.Phr_M0eJW3PkT_gKXiOJsDwypMZ9mz9Xs39aJu4TBlE"
SUPABASE_SERVICE_ROLE_KEY="eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJpc3MiOiJzdXBhYmFzZSIsInJlZiI6InJ6eGJ3bXhrbXJzZXlvYm1mZmtuIiwicm9sZSI6InNlcnZpY2Vfcm9sZSIsImlhdCI6MTc2MzI2NTQ3MSwiZXhwIjoyMDc4ODQxNDcxfQ.ayVvhfdNa5gN8IUlcco4bt9iwvFG6MkRnUD7qls8Oi8"

# Database (Supabase PostgreSQL)
DATABASE_URL="postgresql://postgres:S_6361acb!!@db.rzxbwmxkmrseyobmffkn.supabase.co:5432/postgres"

# NextAuth Configuration
NEXTAUTH_URL="http://localhost:3000"
NEXTAUTH_SECRET="zvP5EJiDxXAguiMIG2hzMVDF8vh/Yg8AUIpjwAM6nmw="

# Google OAuth (æœªè¨­å®š)
# GOOGLE_CLIENT_ID=""
# GOOGLE_CLIENT_SECRET=""
```

âš ï¸ **é‡è¦**: æœ¬ç•ªç’°å¢ƒã§ã¯ `NEXTAUTH_URL` ã‚’å¤‰æ›´:
```env
NEXTAUTH_URL="https://card-shop-ec-orpin.vercel.app"
```

#### ã‚¹ãƒ†ãƒƒãƒ—4: ãƒ‡ãƒ¼ã‚¿ãƒ™ãƒ¼ã‚¹ã®åˆæœŸåŒ–

```bash
# Prisma ã‚¹ã‚­ãƒ¼ãƒã‚’ãƒ‡ãƒ¼ã‚¿ãƒ™ãƒ¼ã‚¹ã«é©ç”¨
npm run db:push

# ã‚·ãƒ¼ãƒ‰ãƒ‡ãƒ¼ã‚¿ï¼ˆ12å•†å“ï¼‰ã‚’æŠ•å…¥
npm run db:seed
```

**æƒ³å®šå‡ºåŠ›**:
```
ğŸŒ± Starting database seed...
ğŸ“ Creating categories...
âœ… Created category: Pokemon Cards
ğŸƒ Creating products...
  âœ“ Created: Pikachu ex (PKM-SCA-025-PIK)
  âœ“ Created: Charizard ex SAR (PKM-VIO-006-CHA)
  ...
âœ… Successfully created 12 products
ğŸ‰ Database seed completed!
```

#### ã‚¹ãƒ†ãƒƒãƒ—5: é–‹ç™ºã‚µãƒ¼ãƒãƒ¼ã®èµ·å‹•

```bash
# é–‹ç™ºã‚µãƒ¼ãƒãƒ¼ã‚’èµ·å‹•
npm run dev
```

**ãƒ–ãƒ©ã‚¦ã‚¶ã§ç¢ºèª**:
- http://localhost:3000 ã«ã‚¢ã‚¯ã‚»ã‚¹
- 12å•†å“ãŒè¡¨ç¤ºã•ã‚Œã‚‹ã“ã¨ã‚’ç¢ºèª
- ã‚«ãƒ¼ãƒˆãƒ»ã‚¦ã‚£ãƒƒã‚·ãƒ¥ãƒªã‚¹ãƒˆãŒå‹•ä½œã™ã‚‹ã“ã¨ã‚’ç¢ºèª

### 3.3 VS Code æ¨å¥¨è¨­å®š

**æ¨å¥¨æ‹¡å¼µæ©Ÿèƒ½**:
```json
{
  "recommendations": [
    "dbaeumer.vscode-eslint",
    "esbenp.prettier-vscode",
    "bradlc.vscode-tailwindcss",
    "prisma.prisma",
    "ms-vscode.vscode-typescript-next"
  ]
}
```

**`.vscode/settings.json`**:
```json
{
  "editor.defaultFormatter": "esbenp.prettier-vscode",
  "editor.formatOnSave": true,
  "editor.codeActionsOnSave": {
    "source.fixAll.eslint": true
  },
  "typescript.tsdk": "node_modules/typescript/lib",
  "tailwindCSS.experimental.classRegex": [
    ["cva\\(([^)]*)\\)", "[\"'`]([^\"'`]*).*?[\"'`]"],
    ["cn\\(([^)]*)\\)", "(?:'|\"|`)([^']*)(?:'|\"|`)"]
  ]
}
```

---

## 4. ãƒ‡ã‚£ãƒ¬ã‚¯ãƒˆãƒªæ§‹æˆ

### 4.1 å…¨ä½“æ§‹æˆ

```
card-shop-ec/
â”œâ”€â”€ .env.local                  # ç’°å¢ƒå¤‰æ•°ï¼ˆãƒ­ãƒ¼ã‚«ãƒ«ï¼‰
â”œâ”€â”€ .env.example                # ç’°å¢ƒå¤‰æ•°ã®ã‚µãƒ³ãƒ—ãƒ«
â”œâ”€â”€ package.json                # ä¾å­˜é–¢ä¿‚å®šç¾©
â”œâ”€â”€ tsconfig.json               # TypeScriptè¨­å®š
â”œâ”€â”€ tailwind.config.ts          # Tailwindè¨­å®š
â”œâ”€â”€ next.config.js              # Next.jsè¨­å®š
â”œâ”€â”€ components.json             # Shadcn/UIè¨­å®š
â”‚
â”œâ”€â”€ prisma/
â”‚   â”œâ”€â”€ schema.prisma           # ãƒ‡ãƒ¼ã‚¿ãƒ™ãƒ¼ã‚¹ã‚¹ã‚­ãƒ¼ãƒ
â”‚   â””â”€â”€ seed.ts                 # ã‚·ãƒ¼ãƒ‰ã‚¹ã‚¯ãƒªãƒ—ãƒˆ
â”‚
â”œâ”€â”€ public/                     # é™çš„ãƒ•ã‚¡ã‚¤ãƒ«
â”‚   â””â”€â”€ placeholder-card.jpg    # ã‚«ãƒ¼ãƒ‰ç”»åƒãƒ—ãƒ¬ãƒ¼ã‚¹ãƒ›ãƒ«ãƒ€ãƒ¼
â”‚
â””â”€â”€ src/
    â”œâ”€â”€ app/                    # App Router (ãƒšãƒ¼ã‚¸)
    â”‚   â”œâ”€â”€ layout.tsx          # ãƒ«ãƒ¼ãƒˆãƒ¬ã‚¤ã‚¢ã‚¦ãƒˆ
    â”‚   â”œâ”€â”€ page.tsx            # ãƒ›ãƒ¼ãƒ ãƒšãƒ¼ã‚¸
    â”‚   â”‚
    â”‚   â”œâ”€â”€ api/                # API Routes
    â”‚   â”‚   â”œâ”€â”€ products/
    â”‚   â”‚   â”‚   â”œâ”€â”€ route.ts           # GET /api/products
    â”‚   â”‚   â”‚   â””â”€â”€ [id]/route.ts      # GET/PUT/DELETE /api/products/[id]
    â”‚   â”‚   â”œâ”€â”€ admin/
    â”‚   â”‚   â”‚   â””â”€â”€ products/
    â”‚   â”‚   â”‚       â”œâ”€â”€ route.ts       # POST /api/admin/products
    â”‚   â”‚   â”‚       â””â”€â”€ [id]/route.ts  # PUT/DELETE /api/admin/products/[id]
    â”‚   â”‚   â””â”€â”€ auth/
    â”‚   â”‚       â”œâ”€â”€ [...nextauth]/route.ts  # NextAuth
    â”‚   â”‚       â””â”€â”€ register/route.ts       # ãƒ¦ãƒ¼ã‚¶ãƒ¼ç™»éŒ²
    â”‚   â”‚
    â”‚   â”œâ”€â”€ products/           # å•†å“ãƒšãƒ¼ã‚¸
    â”‚   â”‚   â”œâ”€â”€ page.tsx        # å•†å“ä¸€è¦§
    â”‚   â”‚   â””â”€â”€ [id]/page.tsx   # å•†å“è©³ç´°
    â”‚   â”‚
    â”‚   â”œâ”€â”€ cart/
    â”‚   â”‚   â””â”€â”€ page.tsx        # ã‚«ãƒ¼ãƒˆãƒšãƒ¼ã‚¸
    â”‚   â”‚
    â”‚   â”œâ”€â”€ wishlist/
    â”‚   â”‚   â””â”€â”€ page.tsx        # ã‚¦ã‚£ãƒƒã‚·ãƒ¥ãƒªã‚¹ãƒˆãƒšãƒ¼ã‚¸
    â”‚   â”‚
    â”‚   â”œâ”€â”€ checkout/
    â”‚   â”‚   â”œâ”€â”€ page.tsx        # ãƒã‚§ãƒƒã‚¯ã‚¢ã‚¦ãƒˆ
    â”‚   â”‚   â””â”€â”€ success/page.tsx # è³¼å…¥å®Œäº†
    â”‚   â”‚
    â”‚   â”œâ”€â”€ admin/              # ç®¡ç†ç”»é¢
    â”‚   â”‚   â”œâ”€â”€ page.tsx        # ãƒ€ãƒƒã‚·ãƒ¥ãƒœãƒ¼ãƒ‰
    â”‚   â”‚   â””â”€â”€ products/
    â”‚   â”‚       â”œâ”€â”€ page.tsx    # å•†å“ä¸€è¦§
    â”‚   â”‚       â”œâ”€â”€ new/page.tsx    # å•†å“ç™»éŒ²
    â”‚   â”‚       â””â”€â”€ import/page.tsx # CSVä¸€æ‹¬ç™»éŒ²
    â”‚   â”‚
    â”‚   â””â”€â”€ auth/               # èªè¨¼ãƒšãƒ¼ã‚¸
    â”‚       â”œâ”€â”€ signin/page.tsx
    â”‚       â””â”€â”€ signup/page.tsx
    â”‚
    â”œâ”€â”€ components/             # Reactã‚³ãƒ³ãƒãƒ¼ãƒãƒ³ãƒˆ
    â”‚   â”œâ”€â”€ ui/                 # Shadcn/UI ã‚³ãƒ³ãƒãƒ¼ãƒãƒ³ãƒˆ
    â”‚   â”‚   â”œâ”€â”€ button.tsx
    â”‚   â”‚   â”œâ”€â”€ input.tsx
    â”‚   â”‚   â”œâ”€â”€ badge.tsx
    â”‚   â”‚   â””â”€â”€ ...             # ãã®ä»–UIã‚³ãƒ³ãƒãƒ¼ãƒãƒ³ãƒˆ
    â”‚   â”‚
    â”‚   â”œâ”€â”€ layout/             # ãƒ¬ã‚¤ã‚¢ã‚¦ãƒˆã‚³ãƒ³ãƒãƒ¼ãƒãƒ³ãƒˆ
    â”‚   â”‚   â”œâ”€â”€ header.tsx      # ãƒ˜ãƒƒãƒ€ãƒ¼ï¼ˆãƒŠãƒ“ã€ã‚«ãƒ¼ãƒˆã‚«ã‚¦ãƒ³ã‚¿ãƒ¼ï¼‰
    â”‚   â”‚   â””â”€â”€ footer.tsx      # ãƒ•ãƒƒã‚¿ãƒ¼
    â”‚   â”‚
    â”‚   â”œâ”€â”€ home/               # ãƒ›ãƒ¼ãƒ ãƒšãƒ¼ã‚¸ç”¨
    â”‚   â”‚   â”œâ”€â”€ hero-section.tsx       # ãƒ’ãƒ¼ãƒ­ãƒ¼ã‚»ã‚¯ã‚·ãƒ§ãƒ³
    â”‚   â”‚   â”œâ”€â”€ product-grid.tsx       # å•†å“ã‚°ãƒªãƒƒãƒ‰ï¼ˆé‡è¦ï¼‰
    â”‚   â”‚   â”œâ”€â”€ filter-sidebar.tsx     # ãƒ•ã‚£ãƒ«ã‚¿ã‚µã‚¤ãƒ‰ãƒãƒ¼
    â”‚   â”‚   â””â”€â”€ category-grid.tsx      # ã‚«ãƒ†ã‚´ãƒªã‚°ãƒªãƒƒãƒ‰
    â”‚   â”‚
    â”‚   â””â”€â”€ products/           # å•†å“é–¢é€£
    â”‚       â”œâ”€â”€ product-card.tsx       # å•†å“ã‚«ãƒ¼ãƒ‰
    â”‚       â”œâ”€â”€ product-filters.tsx    # ãƒ•ã‚£ãƒ«ã‚¿
    â”‚       â””â”€â”€ product-sort.tsx       # ã‚½ãƒ¼ãƒˆ
    â”‚
    â”œâ”€â”€ store/                  # Zustand ã‚¹ãƒˆã‚¢
    â”‚   â”œâ”€â”€ cart-store.ts       # ã‚«ãƒ¼ãƒˆã‚¹ãƒˆã‚¢ï¼ˆé‡è¦ï¼‰
    â”‚   â””â”€â”€ wishlist-store.ts   # ã‚¦ã‚£ãƒƒã‚·ãƒ¥ãƒªã‚¹ãƒˆã‚¹ãƒˆã‚¢
    â”‚
    â”œâ”€â”€ lib/                    # ãƒ¦ãƒ¼ãƒ†ã‚£ãƒªãƒ†ã‚£
    â”‚   â”œâ”€â”€ prisma.ts           # Prisma ã‚¯ãƒ©ã‚¤ã‚¢ãƒ³ãƒˆ
    â”‚   â”œâ”€â”€ utils.ts            # æ±ç”¨ãƒ¦ãƒ¼ãƒ†ã‚£ãƒªãƒ†ã‚£
    â”‚   â”œâ”€â”€ utils/
    â”‚   â”‚   â””â”€â”€ sku.ts          # SKUç”Ÿæˆãƒ­ã‚¸ãƒƒã‚¯
    â”‚   â””â”€â”€ supabase/
    â”‚       â”œâ”€â”€ client.ts       # Supabase ã‚¯ãƒ©ã‚¤ã‚¢ãƒ³ãƒˆ
    â”‚       â””â”€â”€ server.ts       # Supabase ã‚µãƒ¼ãƒãƒ¼ã‚¯ãƒ©ã‚¤ã‚¢ãƒ³ãƒˆ
    â”‚
    â”œâ”€â”€ types/                  # å‹å®šç¾©
    â”‚   â””â”€â”€ next-auth.d.ts      # NextAuth å‹æ‹¡å¼µ
    â”‚
    â””â”€â”€ styles/
        â””â”€â”€ globals.css         # ã‚°ãƒ­ãƒ¼ãƒãƒ«CSS
```

### 4.2 é‡è¦ãƒ•ã‚¡ã‚¤ãƒ«ã®èª¬æ˜

#### ğŸ”´ æœ€é‡è¦ãƒ•ã‚¡ã‚¤ãƒ«

| ãƒ•ã‚¡ã‚¤ãƒ« | å½¹å‰² | ç·¨é›†é »åº¦ |
|---------|------|---------|
| `src/components/home/product-grid.tsx` | å•†å“ä¸€è¦§è¡¨ç¤ºã€ã‚«ãƒ¼ãƒˆè¿½åŠ  | é«˜ |
| `src/store/cart-store.ts` | ã‚«ãƒ¼ãƒˆçŠ¶æ…‹ç®¡ç† | ä¸­ |
| `src/app/api/products/route.ts` | å•†å“å–å¾—API | ä¸­ |
| `prisma/schema.prisma` | ãƒ‡ãƒ¼ã‚¿ãƒ™ãƒ¼ã‚¹ã‚¹ã‚­ãƒ¼ãƒ | ä¸­ |
| `.env.local` | ç’°å¢ƒå¤‰æ•° | ä½ |

#### ğŸŸ¡ é‡è¦ãƒ•ã‚¡ã‚¤ãƒ«

| ãƒ•ã‚¡ã‚¤ãƒ« | å½¹å‰² |
|---------|------|
| `src/components/layout/header.tsx` | ãƒ˜ãƒƒãƒ€ãƒ¼ã€ã‚«ãƒ¼ãƒˆã‚«ã‚¦ãƒ³ã‚¿ãƒ¼ |
| `src/app/cart/page.tsx` | ã‚«ãƒ¼ãƒˆãƒšãƒ¼ã‚¸ |
| `src/app/api/admin/products/route.ts` | ç®¡ç†è€…ç”¨å•†å“ä½œæˆAPI |
| `prisma/seed.ts` | ãƒ‡ãƒ¼ã‚¿ãƒ™ãƒ¼ã‚¹ã‚·ãƒ¼ãƒ‰ |

---

## 5. ä¸»è¦æ©Ÿèƒ½ã¨å®Ÿè£…

### 5.1 å•†å“è¡¨ç¤ºæ©Ÿèƒ½

**ãƒ•ã‚¡ã‚¤ãƒ«**: `src/components/home/product-grid.tsx`

**å‡¦ç†ãƒ•ãƒ­ãƒ¼**:
```typescript
1. useEffect ã§ /api/products ã‚’ fetch
   â†“
2. products é…åˆ—ã«æ ¼ç´
   â†“
3. map() ã§ãƒ«ãƒ¼ãƒ—ã—ã¦ProductCardã‚’è¡¨ç¤º
   â†“
4. ãƒšãƒ¼ã‚¸ãƒãƒ¼ã‚·ãƒ§ãƒ³ãƒ»ã‚½ãƒ¼ãƒˆæ©Ÿèƒ½
```

**é‡è¦ãªå®Ÿè£…ãƒã‚¤ãƒ³ãƒˆ**:
```typescript
// API ã‹ã‚‰å•†å“å–å¾—
useEffect(() => {
  async function fetchProducts() {
    const response = await fetch(`/api/products?page=${currentPage}&limit=12&sortBy=${sortBy}`)
    const data = await response.json()
    setProducts(data.products)
    setPagination(data.pagination)
  }
  fetchProducts()
}, [currentPage, sortBy])
```

**ã‚½ãƒ¼ãƒˆæ©Ÿèƒ½**:
- `newest`: æœ€æ–°é †ï¼ˆä½œæˆæ—¥é™é †ï¼‰
- `price-asc`: ä¾¡æ ¼æ˜‡é †
- `price-desc`: ä¾¡æ ¼é™é †
- `popular`: äººæ°—é †ï¼ˆç¾åœ¨ã¯æœ€æ–°é †ã¨åŒã˜ï¼‰

### 5.2 ã‚«ãƒ¼ãƒˆæ©Ÿèƒ½

**ãƒ•ã‚¡ã‚¤ãƒ«**: `src/store/cart-store.ts`

**Zustand ã‚¹ãƒˆã‚¢ã®å®Ÿè£…**:
```typescript
export const useCartStore = create<CartStore>()(
  persist(
    (set, get) => ({
      items: [],
      addItem: (item) => { /* è¿½åŠ ãƒ­ã‚¸ãƒƒã‚¯ */ },
      removeItem: (id) => { /* å‰Šé™¤ãƒ­ã‚¸ãƒƒã‚¯ */ },
      updateQuantity: (id, quantity) => { /* æ•°é‡æ›´æ–° */ },
      clearCart: () => { /* ã‚«ãƒ¼ãƒˆå…¨å‰Šé™¤ */ },
      getTotalItems: () => { /* åˆè¨ˆå€‹æ•° */ },
      getTotalPrice: () => { /* åˆè¨ˆé‡‘é¡ */ }
    }),
    { name: 'cart-storage' } // localStorage ã®ã‚­ãƒ¼å
  )
)
```

**ã‚«ãƒ¼ãƒˆã«è¿½åŠ ã™ã‚‹å®Ÿè£…ä¾‹**:
```typescript
// ProductGrid.tsx
const addToCart = useCartStore((state) => state.addItem)

const handleAddToCart = (product) => {
  addToCart({
    id: product.id,
    name: product.name,
    price: product.price,
    image: product.image,
    stock: product.stock,
    category: product.cardSet
  })
}
```

**localStorage ã®æ§‹é€ **:
```json
{
  "state": {
    "items": [
      {
        "id": "clx123...",
        "name": "Pikachu ex",
        "price": 1500,
        "quantity": 2,
        "stock": 10,
        "image": "/placeholder-card.jpg"
      }
    ]
  },
  "version": 0
}
```

### 5.3 èªè¨¼æ©Ÿèƒ½

**ãƒ•ã‚¡ã‚¤ãƒ«**: `src/app/api/auth/[...nextauth]/route.ts`

**NextAuth è¨­å®š**:
```typescript
const handler = NextAuth({
  adapter: PrismaAdapter(prisma),
  providers: [
    CredentialsProvider({
      name: "Credentials",
      async authorize(credentials) {
        // ãƒ¡ãƒ¼ãƒ«ãƒ»ãƒ‘ã‚¹ãƒ¯ãƒ¼ãƒ‰èªè¨¼
        const user = await prisma.user.findUnique({
          where: { email: credentials.email }
        })
        
        if (user && bcrypt.compareSync(credentials.password, user.hashedPassword)) {
          return { id: user.id, email: user.email, name: user.name }
        }
        
        return null
      }
    })
  ],
  session: { strategy: "jwt" },
  callbacks: {
    async jwt({ token, user }) {
      if (user) token.id = user.id
      return token
    },
    async session({ session, token }) {
      session.user.id = token.id
      return session
    }
  }
})
```

**èªè¨¼ãƒã‚§ãƒƒã‚¯ä¾‹**:
```typescript
// API Route ã§ã®èªè¨¼ãƒã‚§ãƒƒã‚¯
import { getServerSession } from 'next-auth'

export async function POST(request: NextRequest) {
  const session = await getServerSession()
  
  if (!session || !session.user) {
    return NextResponse.json({ error: 'Unauthorized' }, { status: 401 })
  }
  
  // èªè¨¼æ¸ˆã¿ã®å‡¦ç†...
}
```

### 5.4 ç®¡ç†æ©Ÿèƒ½

#### å•†å“ç™»éŒ²ãƒ•ã‚©ãƒ¼ãƒ 

**ãƒ•ã‚¡ã‚¤ãƒ«**: `src/app/admin/products/new/page.tsx`

**ãƒ•ã‚©ãƒ¼ãƒ æ§‹æˆ**:
```typescript
const formData = {
  name: "",              // å•†å“åï¼ˆå¿…é ˆï¼‰
  nameJa: "",           // æ—¥æœ¬èªå
  cardSet: "",          // ã‚»ãƒƒãƒˆå
  cardNumber: "",       // ã‚«ãƒ¼ãƒ‰ç•ªå·
  rarity: "",           // ãƒ¬ã‚¢ãƒªãƒ†ã‚£
  condition: "",        // çŠ¶æ…‹
  price: "",            // ä¾¡æ ¼ï¼ˆå¿…é ˆï¼‰
  stock: "",            // åœ¨åº«æ•°ï¼ˆå¿…é ˆï¼‰
  language: "JP",       // è¨€èª
  foil: false,          // ãƒ›ã‚¤ãƒ«åŠ å·¥
  firstEdition: false,  // åˆç‰ˆ
  graded: false,        // ã‚°ãƒ¬ãƒ¼ãƒ‰å“
  gradingCompany: "",   // ã‚°ãƒ¬ãƒ¼ãƒ‡ã‚£ãƒ³ã‚°ä¼šç¤¾
  grade: "",            // ã‚°ãƒ¬ãƒ¼ãƒ‰
  description: ""       // èª¬æ˜
}
```

**é€ä¿¡å‡¦ç†**:
```typescript
const handleSubmit = async (e) => {
  e.preventDefault()
  
  const response = await fetch("/api/admin/products", {
    method: "POST",
    headers: { "Content-Type": "application/json" },
    body: JSON.stringify({
      ...formData,
      price: parseFloat(formData.price),
      stock: parseInt(formData.stock),
      categoryId: "pokemon-cards"
    })
  })
  
  if (response.ok) {
    router.push("/admin/products")
  }
}
```

---

## 6. ãƒ‡ãƒ¼ã‚¿ãƒ™ãƒ¼ã‚¹è¨­è¨ˆ

### 6.1 ERå›³

```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”       â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”       â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚   User      â”‚       â”‚   Product    â”‚       â”‚  Category   â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤       â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤       â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚ id (PK)     â”‚       â”‚ id (PK)      â”‚       â”‚ id (PK)     â”‚
â”‚ email       â”‚â—„â”€â”€â”   â”‚ sku (UK)     â”‚   â”Œâ”€â”€â–ºâ”‚ name        â”‚
â”‚ name        â”‚   â”‚   â”‚ name         â”‚   â”‚   â”‚ slug (UK)   â”‚
â”‚ password    â”‚   â”‚   â”‚ nameJa       â”‚   â”‚   â”‚ parentId    â”‚
â”‚ role        â”‚   â”‚   â”‚ slug (UK)    â”‚   â”‚   â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
â”‚ createdAt   â”‚   â”‚   â”‚ description  â”‚   â”‚         â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜   â”‚   â”‚ cardSet      â”‚   â”‚         â”‚
      â”‚           â”‚   â”‚ cardNumber   â”‚   â”‚         â–¼
      â”‚           â”‚   â”‚ rarity       â”‚   â”‚   (è‡ªå·±å‚ç…§)
      â”‚           â”‚   â”‚ condition    â”‚   â”‚
      â–¼           â”‚   â”‚ price        â”‚   â”‚
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”   â”‚   â”‚ stock        â”‚   â”‚
â”‚   Order     â”‚   â”‚   â”‚ categoryId  â”€â”¼â”€â”€â”€â”˜
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤   â”‚   â”‚ createdAt    â”‚
â”‚ id (PK)     â”‚   â”‚   â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
â”‚ userId (FK) â”œâ”€â”€â”€â”˜         â”‚
â”‚ orderNumber â”‚             â”‚
â”‚ subtotal    â”‚             â–¼
â”‚ total       â”‚       â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚ status      â”‚       â”‚ ProductImage â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜       â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
      â”‚               â”‚ id (PK)      â”‚
      â”‚               â”‚ productId(FK)â”‚
      â–¼               â”‚ url          â”‚
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”       â”‚ order        â”‚
â”‚  OrderItem  â”‚       â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚ id (PK)     â”‚
â”‚ orderId(FK) â”‚
â”‚ productId   â”‚
â”‚ quantity    â”‚
â”‚ price       â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

### 6.2 ä¸»è¦ãƒ†ãƒ¼ãƒ–ãƒ«å®šç¾©

#### Product (å•†å“)

| ã‚«ãƒ©ãƒ å | å‹ | NULL | ãƒ‡ãƒ•ã‚©ãƒ«ãƒˆ | èª¬æ˜ |
|---------|---|------|-----------|------|
| id | String(cuid) | NO | auto | ä¸»ã‚­ãƒ¼ |
| sku | String | NO | - | å•†å“ã‚³ãƒ¼ãƒ‰ï¼ˆä¸€æ„ï¼‰ |
| name | String | NO | - | å•†å“åï¼ˆè‹±èªï¼‰ |
| nameJa | String | YES | null | å•†å“åï¼ˆæ—¥æœ¬èªï¼‰ |
| slug | String | NO | - | URLã‚¹ãƒ©ãƒƒã‚°ï¼ˆä¸€æ„ï¼‰ |
| description | Text | YES | null | å•†å“èª¬æ˜ |
| cardSet | String | YES | null | ã‚«ãƒ¼ãƒ‰ã‚»ãƒƒãƒˆå |
| cardNumber | String | YES | null | ã‚«ãƒ¼ãƒ‰ç•ªå· |
| rarity | Enum | YES | null | ãƒ¬ã‚¢ãƒªãƒ†ã‚£ |
| condition | Enum | YES | null | çŠ¶æ…‹ |
| language | String | NO | "EN" | è¨€èª |
| foil | Boolean | NO | false | ãƒ›ã‚¤ãƒ«åŠ å·¥ |
| firstEdition | Boolean | NO | false | åˆç‰ˆ |
| graded | Boolean | NO | false | ã‚°ãƒ¬ãƒ¼ãƒ‰å“ |
| gradingCompany | String | YES | null | ã‚°ãƒ¬ãƒ¼ãƒ‡ã‚£ãƒ³ã‚°ä¼šç¤¾ |
| grade | String | YES | null | ã‚°ãƒ¬ãƒ¼ãƒ‰ |
| price | Decimal | NO | - | ä¾¡æ ¼ |
| comparePrice | Decimal | YES | null | æ¯”è¼ƒä¾¡æ ¼ |
| stock | Int | NO | 0 | åœ¨åº«æ•° |
| lowStock | Int | NO | 5 | ä½åœ¨åº«é–¾å€¤ |
| published | Boolean | NO | true | å…¬é–‹çŠ¶æ…‹ |
| featured | Boolean | NO | false | æ³¨ç›®å•†å“ |
| categoryId | String | NO | - | ã‚«ãƒ†ã‚´ãƒªIDï¼ˆFKï¼‰ |
| createdAt | DateTime | NO | now() | ä½œæˆæ—¥æ™‚ |
| updatedAt | DateTime | NO | now() | æ›´æ–°æ—¥æ™‚ |

**ã‚¤ãƒ³ãƒ‡ãƒƒã‚¯ã‚¹**:
- `sku` (UNIQUE)
- `slug` (UNIQUE)
- `categoryId`
- `cardSet`
- `price`
- `stock`

#### User (ãƒ¦ãƒ¼ã‚¶ãƒ¼)

| ã‚«ãƒ©ãƒ å | å‹ | NULL | ãƒ‡ãƒ•ã‚©ãƒ«ãƒˆ | èª¬æ˜ |
|---------|---|------|-----------|------|
| id | String(cuid) | NO | auto | ä¸»ã‚­ãƒ¼ |
| email | String | NO | - | ãƒ¡ãƒ¼ãƒ«ã‚¢ãƒ‰ãƒ¬ã‚¹ï¼ˆä¸€æ„ï¼‰ |
| name | String | YES | null | è¡¨ç¤ºå |
| hashedPassword | String | YES | null | ãƒãƒƒã‚·ãƒ¥åŒ–ãƒ‘ã‚¹ãƒ¯ãƒ¼ãƒ‰ |
| image | String | YES | null | ãƒ—ãƒ­ãƒ•ã‚£ãƒ¼ãƒ«ç”»åƒURL |
| role | Enum | NO | CUSTOMER | æ¨©é™ï¼ˆCUSTOMER/ADMIN/STAFFï¼‰ |
| emailVerified | DateTime | YES | null | ãƒ¡ãƒ¼ãƒ«ç¢ºèªæ—¥æ™‚ |
| createdAt | DateTime | NO | now() | ä½œæˆæ—¥æ™‚ |
| updatedAt | DateTime | NO | now() | æ›´æ–°æ—¥æ™‚ |

#### Category (ã‚«ãƒ†ã‚´ãƒª)

| ã‚«ãƒ©ãƒ å | å‹ | NULL | ãƒ‡ãƒ•ã‚©ãƒ«ãƒˆ | èª¬æ˜ |
|---------|---|------|-----------|------|
| id | String(cuid) | NO | auto | ä¸»ã‚­ãƒ¼ |
| name | String | NO | - | ã‚«ãƒ†ã‚´ãƒªå |
| slug | String | NO | - | URLã‚¹ãƒ©ãƒƒã‚°ï¼ˆä¸€æ„ï¼‰ |
| description | String | YES | null | èª¬æ˜ |
| parentId | String | YES | null | è¦ªã‚«ãƒ†ã‚´ãƒªIDï¼ˆè‡ªå·±å‚ç…§ï¼‰ |
| createdAt | DateTime | NO | now() | ä½œæˆæ—¥æ™‚ |

**ç¾åœ¨ã®ã‚«ãƒ†ã‚´ãƒªæ§‹é€ **:
```
Pokemon Cards (è¦ª)
â”œâ”€ Booster Packs (å­)
â”œâ”€ Single Cards (å­)
â”œâ”€ Graded Cards (å­)
â””â”€ Promo Cards (å­)
```

### 6.3 Enum å®šç¾©

```prisma
enum UserRole {
  CUSTOMER      // ä¸€èˆ¬ãƒ¦ãƒ¼ã‚¶ãƒ¼
  STAFF         // ã‚¹ã‚¿ãƒƒãƒ•
  ADMIN         // ç®¡ç†è€…
  SUPER_ADMIN   // ã‚¹ãƒ¼ãƒ‘ãƒ¼ç®¡ç†è€…
}

enum Rarity {
  COMMON        // ã‚³ãƒ¢ãƒ³
  UNCOMMON      // ã‚¢ãƒ³ã‚³ãƒ¢ãƒ³
  RARE          // ãƒ¬ã‚¢
  SUPER_RARE    // ã‚¹ãƒ¼ãƒ‘ãƒ¼ãƒ¬ã‚¢ï¼ˆSRï¼‰
  ULTRA_RARE    // ã‚¦ãƒ«ãƒˆãƒ©ãƒ¬ã‚¢ï¼ˆURï¼‰
  SECRET_RARE   // ã‚·ãƒ¼ã‚¯ãƒ¬ãƒƒãƒˆãƒ¬ã‚¢ï¼ˆSAR, AR, CHRå«ã‚€ï¼‰
  PROMO         // ãƒ—ãƒ­ãƒ¢
}

enum Condition {
  MINT                 // å®Œç¾å“ï¼ˆSï¼‰
  NEAR_MINT           // æ¥µç¾å“ï¼ˆAï¼‰
  LIGHTLY_PLAYED      // ç¾å“ï¼ˆBï¼‰
  MODERATELY_PLAYED   // è‰¯å¥½ï¼ˆCï¼‰
  HEAVILY_PLAYED      // ä¸¦å“ï¼ˆDï¼‰
  DAMAGED             // åŠ£åŒ–å“ï¼ˆEï¼‰
}

enum OrderStatus {
  PENDING     // ä¿ç•™
  PROCESSING  // å‡¦ç†ä¸­
  SHIPPED     // ç™ºé€æ¸ˆã¿
  DELIVERED   // é…é”å®Œäº†
  CANCELLED   // ã‚­ãƒ£ãƒ³ã‚»ãƒ«
  REFUNDED    // è¿”é‡‘æ¸ˆã¿
}
```

---

## 7. APIä»•æ§˜

### 7.1 ã‚¨ãƒ³ãƒ‰ãƒã‚¤ãƒ³ãƒˆä¸€è¦§

| ãƒ¡ã‚½ãƒƒãƒ‰ | ã‚¨ãƒ³ãƒ‰ãƒã‚¤ãƒ³ãƒˆ | èªè¨¼ | èª¬æ˜ |
|---------|--------------|-----|------|
| GET | `/api/products` | ä¸è¦ | å•†å“ä¸€è¦§å–å¾— |
| GET | `/api/products/[id]` | ä¸è¦ | å•†å“è©³ç´°å–å¾— |
| POST | `/api/admin/products` | å¿…è¦ | å•†å“ä½œæˆ |
| PUT | `/api/admin/products/[id]` | å¿…è¦ | å•†å“æ›´æ–° |
| DELETE | `/api/admin/products/[id]` | å¿…è¦ | å•†å“å‰Šé™¤ |
| GET | `/api/admin/products` | å¿…è¦ | ç®¡ç†è€…ç”¨å•†å“ä¸€è¦§ |
| POST | `/api/auth/register` | ä¸è¦ | ãƒ¦ãƒ¼ã‚¶ãƒ¼ç™»éŒ² |
| GET/POST | `/api/auth/[...nextauth]` | - | NextAuthèªè¨¼ |

### 7.2 è©³ç´°ä»•æ§˜

#### GET /api/products

**èª¬æ˜**: å…¬é–‹å•†å“ã®ä¸€è¦§ã‚’å–å¾—ï¼ˆãƒšãƒ¼ã‚¸ãƒãƒ¼ã‚·ãƒ§ãƒ³ã€ãƒ•ã‚£ãƒ«ã‚¿ã€ã‚½ãƒ¼ãƒˆå¯¾å¿œï¼‰

**ã‚¯ã‚¨ãƒªãƒ‘ãƒ©ãƒ¡ãƒ¼ã‚¿**:
```
page          : ãƒšãƒ¼ã‚¸ç•ªå·ï¼ˆãƒ‡ãƒ•ã‚©ãƒ«ãƒˆ: 1ï¼‰
limit         : 1ãƒšãƒ¼ã‚¸ã®ä»¶æ•°ï¼ˆãƒ‡ãƒ•ã‚©ãƒ«ãƒˆ: 12ï¼‰
sortBy        : ã‚½ãƒ¼ãƒˆé †ï¼ˆnewest, price-asc, price-desc, popularï¼‰
category      : ã‚«ãƒ†ã‚´ãƒªã‚¹ãƒ©ãƒƒã‚°ã§ãƒ•ã‚£ãƒ«ã‚¿
rarity        : ãƒ¬ã‚¢ãƒªãƒ†ã‚£ã§ãƒ•ã‚£ãƒ«ã‚¿
condition     : çŠ¶æ…‹ã§ãƒ•ã‚£ãƒ«ã‚¿
cardSet       : ã‚«ãƒ¼ãƒ‰ã‚»ãƒƒãƒˆã§ãƒ•ã‚£ãƒ«ã‚¿
search        : æ¤œç´¢ã‚­ãƒ¼ãƒ¯ãƒ¼ãƒ‰ï¼ˆname, nameJa, descriptionï¼‰
minPrice      : æœ€å°ä¾¡æ ¼
maxPrice      : æœ€å¤§ä¾¡æ ¼
```

**ãƒªã‚¯ã‚¨ã‚¹ãƒˆä¾‹**:
```http
GET /api/products?page=1&limit=12&sortBy=price-asc&rarity=SECRET_RARE&minPrice=5000&maxPrice=20000
```

**ãƒ¬ã‚¹ãƒãƒ³ã‚¹**:
```json
{
  "products": [
    {
      "id": "clx123abc",
      "sku": "PKM-VIO-006-CHA",
      "name": "Charizard ex SAR",
      "nameJa": "ãƒªã‚¶ãƒ¼ãƒ‰ãƒ³ex SAR",
      "slug": "charizard-ex-sar-violet-006",
      "cardSet": "Violet ex",
      "cardNumber": "006/078",
      "rarity": "SECRET_RARE",
      "condition": "MINT",
      "price": 15000,
      "comparePrice": null,
      "stock": 1,
      "lowStock": true,
      "image": "/placeholder-card.jpg",
      "category": {
        "id": "clx456def",
        "name": "Pokemon Cards",
        "slug": "pokemon-cards"
      },
      "language": "JP",
      "foil": true,
      "firstEdition": false,
      "graded": false,
      "featured": true
    }
  ],
  "pagination": {
    "page": 1,
    "limit": 12,
    "total": 12,
    "totalPages": 1,
    "hasMore": false
  }
}
```

#### POST /api/admin/products

**èª¬æ˜**: æ–°è¦å•†å“ã‚’ä½œæˆï¼ˆç®¡ç†è€…ã®ã¿ï¼‰

**èªè¨¼**: å¿…è¦ï¼ˆNextAuth sessionï¼‰

**ãƒªã‚¯ã‚¨ã‚¹ãƒˆãƒœãƒ‡ã‚£**:
```json
{
  "name": "Pikachu VMAX",
  "nameJa": "ãƒ”ã‚«ãƒãƒ¥ã‚¦VMAX",
  "cardSet": "Vivid Voltage",
  "cardNumber": "044/185",
  "rarity": "RRR (ãƒˆãƒªãƒ—ãƒ«ãƒ¬ã‚¢)",
  "condition": "A (æ¥µç¾å“)",
  "price": 2500,
  "stock": 15,
  "language": "JP",
  "foil": true,
  "firstEdition": false,
  "graded": false,
  "description": "Powerful Pikachu VMAX card from Vivid Voltage set."
}
```

**ãƒ¬ã‚¹ãƒãƒ³ã‚¹ï¼ˆæˆåŠŸæ™‚ 201ï¼‰**:
```json
{
  "id": "clx789ghi",
  "sku": "PKM-VIV-044-X3K",
  "slug": "pikachu-vmax-vivid-voltage-044",
  "name": "Pikachu VMAX",
  "price": 2500,
  "stock": 15,
  "createdAt": "2025-11-19T12:00:00.000Z"
}
```

**ã‚¨ãƒ©ãƒ¼ãƒ¬ã‚¹ãƒãƒ³ã‚¹**:
```json
// 401 Unauthorized
{
  "error": "Unauthorized"
}

// 400 Bad Request
{
  "error": "Missing required fields: name, price, stock"
}

// 409 Conflict (é‡è¤‡SKU)
{
  "error": "Product with this SKU or slug already exists"
}
```

### 7.3 SKUç”Ÿæˆãƒ­ã‚¸ãƒƒã‚¯

**ãƒ•ã‚¡ã‚¤ãƒ«**: `src/lib/utils/sku.ts`

**ã‚¢ãƒ«ã‚´ãƒªã‚ºãƒ **:
```typescript
function generateSKU(cardSet?: string, cardNumber?: string): string {
  // 1. ã‚»ãƒƒãƒˆã‚³ãƒ¼ãƒ‰ï¼ˆ3æ–‡å­—ï¼‰
  const setCode = cardSet
    ? cardSet.substring(0, 3).toUpperCase().replace(/[^A-Z0-9]/g, '').padEnd(3, 'X')
    : 'UNK'
  
  // 2. ã‚«ãƒ¼ãƒ‰ç•ªå·ï¼ˆ3æ¡ï¼‰
  const num = cardNumber
    ? cardNumber.replace(/[^0-9]/g, '').padStart(3, '0').substring(0, 3)
    : Date.now().toString().slice(-6)
  
  // 3. ãƒ©ãƒ³ãƒ€ãƒ æ–‡å­—åˆ—ï¼ˆ3æ–‡å­—ï¼‰
  const random = Math.random().toString(36).substring(2, 5).toUpperCase()
  
  // 4. çµ„ã¿åˆã‚ã›
  return `PKM-${setCode}-${num}-${random}`
}
```

**ç”Ÿæˆä¾‹**:
```
Input:  cardSet="Scarlet ex", cardNumber="025/165"
Output: "PKM-SCA-025-A3F"

Input:  cardSet="Violet ex", cardNumber="006/078"
Output: "PKM-VIO-006-B7K"

Input:  cardSet="Pokemon 151", cardNumber="150/165"
Output: "PKM-POK-150-C2M"
```

---

## 8. ãƒ‡ãƒ—ãƒ­ã‚¤æ‰‹é †

### 8.1 Vercel ãƒ‡ãƒ—ãƒ­ã‚¤è¨­å®š

**å‰ææ¡ä»¶**:
- GitHub ãƒªãƒã‚¸ãƒˆãƒªãŒå­˜åœ¨
- Vercel ã‚¢ã‚«ã‚¦ãƒ³ãƒˆãŒä½œæˆæ¸ˆã¿
- ãƒªãƒã‚¸ãƒˆãƒªã¨VercelãŒé€£æºæ¸ˆã¿

**è‡ªå‹•ãƒ‡ãƒ—ãƒ­ã‚¤ãƒ•ãƒ­ãƒ¼**:
```
1. ãƒ­ãƒ¼ã‚«ãƒ«ã§ git commit
   â†“
2. git push origin master
   â†“
3. GitHub ã«ãƒ—ãƒƒã‚·ãƒ¥
   â†“
4. Vercel ãŒè‡ªå‹•æ¤œçŸ¥
   â†“
5. ãƒ“ãƒ«ãƒ‰é–‹å§‹ï¼ˆnpm run buildï¼‰
   â†“
6. ãƒ‡ãƒ—ãƒ­ã‚¤å®Œäº†
   â†“
7. æœ¬ç•ªURLæ›´æ–°
```

**ç¾åœ¨ã®æœ¬ç•ªURL**:
```
https://card-shop-ec-orpin.vercel.app
```

### 8.2 ç’°å¢ƒå¤‰æ•°è¨­å®šï¼ˆVercelï¼‰

**Vercel Dashboard**:
1. https://vercel.com/dashboard ã«ãƒ­ã‚°ã‚¤ãƒ³
2. ãƒ—ãƒ­ã‚¸ã‚§ã‚¯ãƒˆ `card-shop-ec` ã‚’é¸æŠ
3. **Settings** â†’ **Environment Variables**
4. ä»¥ä¸‹ã‚’è¨­å®š:

```env
# Supabase
NEXT_PUBLIC_SUPABASE_URL=https://rzxbwmxkmrseyobmffkn.supabase.co
NEXT_PUBLIC_SUPABASE_ANON_KEY=eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9...
SUPABASE_SERVICE_ROLE_KEY=eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9...

# Database
DATABASE_URL=postgresql://postgres:S_6361acb!!@db.rzxbwmxkmrseyobmffkn.supabase.co:5432/postgres

# NextAuth
NEXTAUTH_URL=https://card-shop-ec-orpin.vercel.app
NEXTAUTH_SECRET=zvP5EJiDxXAguiMIG2hzMVDF8vh/Yg8AUIpjwAM6nmw=

# Google OAuth (æœªè¨­å®š)
# GOOGLE_CLIENT_ID=
# GOOGLE_CLIENT_SECRET=
```

**é‡è¦**: ç’°å¢ƒå¤‰æ•°ã‚’å¤‰æ›´ã—ãŸå¾Œã¯å†ãƒ‡ãƒ—ãƒ­ã‚¤ãŒå¿…è¦

### 8.3 æ‰‹å‹•ãƒ‡ãƒ—ãƒ­ã‚¤

```bash
# 1. æœ€æ–°ã®ã‚³ãƒ¼ãƒ‰ã‚’ã‚³ãƒŸãƒƒãƒˆ
git add -A
git commit -m "feat: Add new feature"

# 2. ãƒªãƒ¢ãƒ¼ãƒˆã«ãƒ—ãƒƒã‚·ãƒ¥
git push origin master

# 3. Vercel ãŒè‡ªå‹•çš„ã«ãƒ‡ãƒ—ãƒ­ã‚¤é–‹å§‹
# ã¾ãŸã¯ Vercel CLI ã§æ‰‹å‹•ãƒ‡ãƒ—ãƒ­ã‚¤:
npx vercel --prod
```

### 8.4 ãƒ“ãƒ«ãƒ‰ã‚³ãƒãƒ³ãƒ‰ï¼ˆVercelè¨­å®šï¼‰

**Build Command**:
```bash
npm run build
```

**Output Directory**:
```
.next
```

**Install Command**:
```bash
npm install
```

**Framework Preset**: Next.js

---

## 9. é‹ç”¨ç®¡ç†

### 9.1 ã‚ˆãä½¿ã†ã‚³ãƒãƒ³ãƒ‰

#### é–‹ç™º

```bash
# é–‹ç™ºã‚µãƒ¼ãƒãƒ¼èµ·å‹•
npm run dev

# ãƒ“ãƒ«ãƒ‰
npm run build

# æœ¬ç•ªãƒ¢ãƒ¼ãƒ‰ã§èµ·å‹•ï¼ˆãƒ­ãƒ¼ã‚«ãƒ«ç¢ºèªï¼‰
npm run start

# ESLint ãƒã‚§ãƒƒã‚¯
npm run lint
```

#### ãƒ‡ãƒ¼ã‚¿ãƒ™ãƒ¼ã‚¹

```bash
# Prisma ã‚¹ã‚­ãƒ¼ãƒã‚’ DB ã«é©ç”¨
npm run db:push

# ãƒã‚¤ã‚°ãƒ¬ãƒ¼ã‚·ãƒ§ãƒ³ä½œæˆãƒ»å®Ÿè¡Œ
npm run db:migrate

# Prisma Studio èµ·å‹•ï¼ˆGUIã§DBç¢ºèªï¼‰
npm run db:studio

# Prisma ã‚¯ãƒ©ã‚¤ã‚¢ãƒ³ãƒˆå†ç”Ÿæˆ
npm run db:generate

# ã‚·ãƒ¼ãƒ‰ãƒ‡ãƒ¼ã‚¿æŠ•å…¥
npm run db:seed
```

#### Git

```bash
# å¤‰æ›´ã‚’ã‚¹ãƒ†ãƒ¼ã‚¸ãƒ³ã‚°
git add -A

# ã‚³ãƒŸãƒƒãƒˆ
git commit -m "commit message"

# ãƒ—ãƒƒã‚·ãƒ¥ï¼ˆãƒ‡ãƒ—ãƒ­ã‚¤ãƒˆãƒªã‚¬ãƒ¼ï¼‰
git push origin master

# ãƒ–ãƒ©ãƒ³ãƒä½œæˆ
git checkout -b feature/new-feature

# å¤‰æ›´ã‚’ç ´æ£„
git checkout -- <file>

# ãƒªãƒ¢ãƒ¼ãƒˆæœ€æ–°ã‚’å–å¾—
git pull origin master
```

### 9.2 å•†å“è¿½åŠ ã®é‹ç”¨ãƒ•ãƒ­ãƒ¼

#### æ–¹æ³•1: ç®¡ç†ç”»é¢ã‹ã‚‰æ‰‹å‹•ç™»éŒ²

```
1. /admin/products/new ã«ã‚¢ã‚¯ã‚»ã‚¹
2. ãƒ•ã‚©ãƒ¼ãƒ ã«å…¥åŠ›
   - å•†å“åï¼ˆå¿…é ˆï¼‰
   - ã‚«ãƒ¼ãƒ‰ã‚»ãƒƒãƒˆ
   - ã‚«ãƒ¼ãƒ‰ç•ªå·
   - ãƒ¬ã‚¢ãƒªãƒ†ã‚£
   - çŠ¶æ…‹
   - ä¾¡æ ¼ï¼ˆå¿…é ˆï¼‰
   - åœ¨åº«æ•°ï¼ˆå¿…é ˆï¼‰
3. ã€Œä¿å­˜ã€ãƒœã‚¿ãƒ³ã‚¯ãƒªãƒƒã‚¯
4. å•†å“ä¸€è¦§ã«è¡¨ç¤ºã•ã‚Œã‚‹ã“ã¨ã‚’ç¢ºèª
5. ãƒ›ãƒ¼ãƒ ãƒšãƒ¼ã‚¸ã§ç¢ºèª
```

#### æ–¹æ³•2: CSVä¸€æ‹¬ç™»éŒ²ï¼ˆæœªå®Ÿè£…ï¼‰

```
1. CSV ãƒ†ãƒ³ãƒ—ãƒ¬ãƒ¼ãƒˆã‚’ãƒ€ã‚¦ãƒ³ãƒ­ãƒ¼ãƒ‰
2. Excelç­‰ã§å•†å“ãƒ‡ãƒ¼ã‚¿ã‚’å…¥åŠ›
3. /admin/products/import ã«ã‚¢ã‚¯ã‚»ã‚¹
4. CSVãƒ•ã‚¡ã‚¤ãƒ«ã‚’ã‚¢ãƒƒãƒ—ãƒ­ãƒ¼ãƒ‰
5. ã‚¤ãƒ³ãƒãƒ¼ãƒˆçµæœã‚’ç¢ºèª
6. ã‚¨ãƒ©ãƒ¼ãŒã‚ã‚Œã°ä¿®æ­£ã—ã¦å†å®Ÿè¡Œ
```

**CSV ãƒ•ã‚©ãƒ¼ãƒãƒƒãƒˆä¾‹**:
```csv
name,nameJa,cardSet,cardNumber,rarity,condition,price,stock,language,foil,firstEdition,graded,gradingCompany,grade,description
Pikachu ex,ãƒ”ã‚«ãƒãƒ¥ã‚¦ex,Scarlet ex,025/165,RR,MINT,1500,10,EN,false,false,false,,,Electric-type Pokemon card
Charizard ex SAR,ãƒªã‚¶ãƒ¼ãƒ‰ãƒ³ex SAR,Violet ex,006/078,SAR,MINT,15000,1,JP,true,false,false,,,Ultra rare special art
```

#### æ–¹æ³•3: APIçµŒç”±ï¼ˆãƒ—ãƒ­ã‚°ãƒ©ãƒ ï¼‰

```bash
curl -X POST https://card-shop-ec-orpin.vercel.app/api/admin/products \
  -H "Content-Type: application/json" \
  -H "Cookie: next-auth.session-token=..." \
  -d '{
    "name": "Test Card",
    "price": 1000,
    "stock": 5,
    "cardSet": "Test Set",
    "rarity": "RARE"
  }'
```

### 9.3 ãƒ‡ãƒ¼ã‚¿ãƒ™ãƒ¼ã‚¹ãƒãƒƒã‚¯ã‚¢ãƒƒãƒ—

**Supabase ã§ã®è‡ªå‹•ãƒãƒƒã‚¯ã‚¢ãƒƒãƒ—**:
- Supabase ã¯è‡ªå‹•çš„ã«æ¯æ—¥ãƒãƒƒã‚¯ã‚¢ãƒƒãƒ—ã‚’å–å¾—
- 7æ—¥é–“ä¿æŒï¼ˆFreeãƒ—ãƒ©ãƒ³ï¼‰
- ãƒ€ãƒƒã‚·ãƒ¥ãƒœãƒ¼ãƒ‰ã‹ã‚‰å¾©å…ƒå¯èƒ½

**æ‰‹å‹•ãƒãƒƒã‚¯ã‚¢ãƒƒãƒ—**:
```bash
# pg_dump ã§ãƒ€ãƒ³ãƒ—
pg_dump -h db.rzxbwmxkmrseyobmffkn.supabase.co \
  -U postgres \
  -d postgres \
  -F c \
  -b \
  -v \
  -f backup_$(date +%Y%m%d).dump

# ã¾ãŸã¯ Supabase CLI
supabase db dump -f backup.sql
```

**ãƒªã‚¹ãƒˆã‚¢**:
```bash
# pg_restore
pg_restore -h db.rzxbwmxkmrseyobmffkn.supabase.co \
  -U postgres \
  -d postgres \
  -v backup_20251119.dump
```

---

## 10. ãƒˆãƒ©ãƒ–ãƒ«ã‚·ãƒ¥ãƒ¼ãƒ†ã‚£ãƒ³ã‚°

### 10.1 ã‚ˆãã‚ã‚‹å•é¡Œã¨è§£æ±ºç­–

#### å•é¡Œ1: `npm install` ã§ã‚¨ãƒ©ãƒ¼

**ã‚¨ãƒ©ãƒ¼ä¾‹**:
```
npm ERR! code ERESOLVE
npm ERR! ERESOLVE unable to resolve dependency tree
```

**è§£æ±ºç­–**:
```bash
# node_modules ã¨ package-lock.json ã‚’å‰Šé™¤
rm -rf node_modules package-lock.json

# ã‚¯ãƒªãƒ¼ãƒ³ã‚¤ãƒ³ã‚¹ãƒˆãƒ¼ãƒ«
npm install --legacy-peer-deps

# ã¾ãŸã¯
npm ci
```

#### å•é¡Œ2: Prisma ã‚¯ãƒ©ã‚¤ã‚¢ãƒ³ãƒˆãŒè¦‹ã¤ã‹ã‚‰ãªã„

**ã‚¨ãƒ©ãƒ¼ä¾‹**:
```
Error: @prisma/client did not initialize yet
```

**è§£æ±ºç­–**:
```bash
# Prisma ã‚¯ãƒ©ã‚¤ã‚¢ãƒ³ãƒˆã‚’å†ç”Ÿæˆ
npm run db:generate

# ã¾ãŸã¯
npx prisma generate
```

#### å•é¡Œ3: DATABASE_URL ãŒè¦‹ã¤ã‹ã‚‰ãªã„

**ã‚¨ãƒ©ãƒ¼ä¾‹**:
```
Environment variable not found: DATABASE_URL
```

**è§£æ±ºç­–**:
```bash
# .env.local ãƒ•ã‚¡ã‚¤ãƒ«ãŒå­˜åœ¨ã™ã‚‹ã‹ç¢ºèª
ls -la .env.local

# ãªã‘ã‚Œã°ä½œæˆ
cp .env.example .env.local

# å†…å®¹ã‚’ç¢ºèªãƒ»ç·¨é›†
nano .env.local
```

#### å•é¡Œ4: ãƒãƒ¼ãƒˆ 3000 ãŒæ—¢ã«ä½¿ç”¨ä¸­

**ã‚¨ãƒ©ãƒ¼ä¾‹**:
```
Error: listen EADDRINUSE: address already in use :::3000
```

**è§£æ±ºç­–**:
```bash
# Windows
netstat -ano | findstr :3000
taskkill /PID <PID> /F

# ã¾ãŸã¯åˆ¥ã®ãƒãƒ¼ãƒˆã§èµ·å‹•
PORT=3001 npm run dev
```

#### å•é¡Œ5: ã‚«ãƒ¼ãƒˆã«è¿½åŠ ã§ããªã„

**ç¢ºèªãƒã‚¤ãƒ³ãƒˆ**:
```bash
# 1. ãƒ–ãƒ©ã‚¦ã‚¶ã®ã‚³ãƒ³ã‚½ãƒ¼ãƒ«ã§ã‚¨ãƒ©ãƒ¼ç¢ºèªï¼ˆF12ï¼‰
# 2. localStorage ãŒæœ‰åŠ¹ã‹ç¢ºèª
localStorage.getItem('cart-storage')

# 3. JavaScript ãŒæœ‰åŠ¹ã‹ç¢ºèª
console.log('JavaScript is working')

# 4. Zustand ã‚¹ãƒˆã‚¢ãŒåˆæœŸåŒ–ã•ã‚Œã¦ã„ã‚‹ã‹
# ãƒšãƒ¼ã‚¸ã‚½ãƒ¼ã‚¹ã§ bundle.js ãŒèª­ã¿è¾¼ã¾ã‚Œã¦ã„ã‚‹ã‹ç¢ºèª
```

#### å•é¡Œ6: ãƒ“ãƒ«ãƒ‰ã‚¨ãƒ©ãƒ¼ï¼ˆå‹ã‚¨ãƒ©ãƒ¼ï¼‰

**ã‚¨ãƒ©ãƒ¼ä¾‹**:
```
Type error: Property 'id' does not exist on type ...
```

**è§£æ±ºç­–**:
```bash
# TypeScript ã®å‹å®šç¾©ã‚’ç¢ºèª
# src/types/ é…ä¸‹ã®ãƒ•ã‚¡ã‚¤ãƒ«ã‚’ç¢ºèª

# å‹ã‚­ãƒ£ãƒƒã‚·ãƒ¥ã‚’ã‚¯ãƒªã‚¢
rm -rf .next
npm run build
```

### 10.2 ãƒ­ã‚°ç¢ºèª

#### Vercel ãƒ­ã‚°

```
1. Vercel Dashboard ã«ãƒ­ã‚°ã‚¤ãƒ³
2. ãƒ—ãƒ­ã‚¸ã‚§ã‚¯ãƒˆã‚’é¸æŠ
3. Deployments ã‚¿ãƒ–
4. æœ€æ–°ãƒ‡ãƒ—ãƒ­ã‚¤ã‚’ã‚¯ãƒªãƒƒã‚¯
5. "View Function Logs" ã§API Routeã®ãƒ­ã‚°ç¢ºèª
```

#### ãƒ­ãƒ¼ã‚«ãƒ«ãƒ­ã‚°

```bash
# é–‹ç™ºã‚µãƒ¼ãƒãƒ¼ã®ã‚³ãƒ³ã‚½ãƒ¼ãƒ«ãƒ­ã‚°
npm run dev
# â†’ ã‚³ãƒ³ã‚½ãƒ¼ãƒ«ã«å‡ºåŠ›

# ãƒ–ãƒ©ã‚¦ã‚¶ã®ã‚³ãƒ³ã‚½ãƒ¼ãƒ«ãƒ­ã‚°
# F12 â†’ Console ã‚¿ãƒ–
```

### 10.3 ç·Šæ€¥æ™‚å¯¾å¿œ

#### ã‚µã‚¤ãƒˆãŒãƒ€ã‚¦ãƒ³ã—ãŸå ´åˆ

```
1. Vercel Status ã‚’ç¢ºèª
   https://www.vercel-status.com/

2. ãƒ‡ãƒ—ãƒ­ã‚¤å±¥æ­´ã‚’ç¢ºèª
   å‰å›ã®æ­£å¸¸ãªãƒ‡ãƒ—ãƒ­ã‚¤ã«ãƒ­ãƒ¼ãƒ«ãƒãƒƒã‚¯

3. Supabase Status ã‚’ç¢ºèª
   https://status.supabase.com/

4. ç’°å¢ƒå¤‰æ•°ãŒæ­£ã—ã„ã‹ç¢ºèª
   Vercel Dashboard â†’ Settings â†’ Environment Variables
```

#### ãƒ‡ãƒ¼ã‚¿ãƒ™ãƒ¼ã‚¹æ¥ç¶šã‚¨ãƒ©ãƒ¼

```bash
# Supabase Dashboard ã§ç¢ºèª
https://supabase.com/dashboard/project/rzxbwmxkmrseyobmffkn

# Pause ã•ã‚Œã¦ã„ãªã„ã‹ç¢ºèª
# Connection string ãŒæ­£ã—ã„ã‹ç¢ºèª

# Prisma ã§æ¥ç¶šãƒ†ã‚¹ãƒˆ
npx prisma db pull
```

---

## 11. ä»Šå¾Œã®é–‹ç™ºã‚¿ã‚¹ã‚¯

### 11.1 å„ªå…ˆåº¦åˆ¥ã‚¿ã‚¹ã‚¯

#### P0 - ç·Šæ€¥ï¼ˆã™ãã«å¿…è¦ï¼‰

- [ ] ã‚«ãƒ¼ãƒˆæ©Ÿèƒ½ã®å‹•ä½œç¢ºèªã¨ä¿®æ­£ï¼ˆãƒ‡ãƒãƒƒã‚°ãƒ­ã‚°ã§èª¿æŸ»ä¸­ï¼‰
- [ ] Google OAuth è¨­å®šï¼ˆCLIENT_ID, CLIENT_SECRETï¼‰
- [ ] å•†å“ç”»åƒã‚¢ãƒƒãƒ—ãƒ­ãƒ¼ãƒ‰æ©Ÿèƒ½

#### P1 - é«˜ï¼ˆè¿‘æ—¥ä¸­ã«å¿…è¦ï¼‰

- [ ] CSV ä¸€æ‹¬ã‚¤ãƒ³ãƒãƒ¼ãƒˆå®Ÿè£…
- [ ] å•†å“è©³ç´°ãƒšãƒ¼ã‚¸ã®å®Œå…¨å®Ÿè£…
- [ ] ãƒ•ã‚£ãƒ«ã‚¿æ©Ÿèƒ½ã®APIé€£æº
- [ ] ç®¡ç†ç”»é¢ï¼šå•†å“ç·¨é›†ãƒ»å‰Šé™¤
- [ ] å¤šè¨€èªåŒ–ï¼ˆi18nï¼‰å®Ÿè£…

#### P2 - ä¸­ï¼ˆä½™è£•ãŒã‚ã‚Œã°ï¼‰

- [ ] æ¤œç´¢æ©Ÿèƒ½ã®å®Ÿè£…
- [ ] ãƒ¬ãƒ“ãƒ¥ãƒ¼ã‚·ã‚¹ãƒ†ãƒ 
- [ ] åœ¨åº«ã‚¢ãƒ©ãƒ¼ãƒˆæ©Ÿèƒ½
- [ ] ãƒ¡ãƒ¼ãƒ«é€šçŸ¥ï¼ˆæ³¨æ–‡ç¢ºèªç­‰ï¼‰
- [ ] ã‚¯ãƒ¼ãƒãƒ³æ©Ÿèƒ½

#### P3 - ä½ï¼ˆå°†æ¥çš„ã«ï¼‰

- [ ] ãŠã™ã™ã‚å•†å“ã‚¢ãƒ«ã‚´ãƒªã‚ºãƒ 
- [ ] ã‚¦ã‚£ãƒƒã‚·ãƒ¥ãƒªã‚¹ãƒˆå…±æœ‰
- [ ] ä¾¡æ ¼å¤‰å‹•é€šçŸ¥
- [ ] ã‚¢ã‚¯ã‚»ã‚¹è§£æï¼ˆGoogle Analyticsï¼‰
- [ ] ãƒ‘ãƒ•ã‚©ãƒ¼ãƒãƒ³ã‚¹æœ€é©åŒ–

### 11.2 æŠ€è¡“çš„è² å‚µ

- ESLintè­¦å‘Šã®ä¿®æ­£ï¼ˆ`any` å‹ã®å‰Šé™¤ï¼‰
- ã‚³ãƒ³ã‚½ãƒ¼ãƒ«ãƒ­ã‚°ã®å‰Šé™¤ï¼ˆæœ¬ç•ªç’°å¢ƒï¼‰
- æœªä½¿ç”¨ã‚³ãƒ³ãƒãƒ¼ãƒãƒ³ãƒˆã®å‰Šé™¤
- ãƒ†ã‚¹ãƒˆã‚³ãƒ¼ãƒ‰ã®è¿½åŠ ï¼ˆJestï¼‰
- ã‚¨ãƒ©ãƒ¼ãƒãƒ³ãƒ‰ãƒªãƒ³ã‚°ã®çµ±ä¸€

---

## 12. é€£çµ¡å…ˆãƒ»ãƒªã‚½ãƒ¼ã‚¹

### 12.1 é‡è¦ãƒªãƒ³ã‚¯

| é …ç›® | URL |
|------|-----|
| **æœ¬ç•ªã‚µã‚¤ãƒˆ** | https://card-shop-ec-orpin.vercel.app |
| **GitHub** | https://github.com/rikimaru63/card-shop-ec |
| **Vercel Dashboard** | https://vercel.com/dashboard |
| **Supabase Dashboard** | https://supabase.com/dashboard/project/rzxbwmxkmrseyobmffkn |
| **Next.js Docs** | https://nextjs.org/docs |
| **Prisma Docs** | https://www.prisma.io/docs |
| **Shadcn/UI** | https://ui.shadcn.com/ |

### 12.2 ãƒ‰ã‚­ãƒ¥ãƒ¡ãƒ³ãƒˆ

**ãƒ—ãƒ­ã‚¸ã‚§ã‚¯ãƒˆå†…ãƒ‰ã‚­ãƒ¥ãƒ¡ãƒ³ãƒˆ**:
- `README.md` - ãƒ—ãƒ­ã‚¸ã‚§ã‚¯ãƒˆæ¦‚è¦
- `IMPLEMENTATION_PLAN.md` - å®Ÿè£…è¨ˆç”»
- `IMPLEMENTATION_COMPLETE.md` - å®Ÿè£…å®Œäº†å ±å‘Š
- `CART_DEBUG_GUIDE.md` - ã‚«ãƒ¼ãƒˆæ©Ÿèƒ½ãƒ‡ãƒãƒƒã‚°ã‚¬ã‚¤ãƒ‰
- `CART_VERIFICATION.md` - ã‚«ãƒ¼ãƒˆå‹•ä½œç¢ºèªæ‰‹é †
- `TEST_CHECKLIST.md` - ãƒ†ã‚¹ãƒˆãƒã‚§ãƒƒã‚¯ãƒªã‚¹ãƒˆ
- `TEST_RESULTS.md` - ãƒ†ã‚¹ãƒˆçµæœ
- `FIXES_SUMMARY.md` - ãƒã‚°ä¿®æ­£ã‚µãƒãƒªãƒ¼

### 12.3 ãƒ‘ã‚¹ãƒ¯ãƒ¼ãƒ‰ãƒ»èªè¨¼æƒ…å ±

**âš ï¸ é‡è¦: ä»¥ä¸‹ã¯å³é‡ã«ç®¡ç†ã—ã¦ãã ã•ã„**

```
Supabase Project:
- Project ID: rzxbwmxkmrseyobmffkn
- Database Password: S_6361acb!!
- Region: us-east-1

GitHub:
- Repository: rikimaru63/card-shop-ec
- Branch: master

NextAuth:
- Secret: zvP5EJiDxXAguiMIG2hzMVDF8vh/Yg8AUIpjwAM6nmw=
```

**ã“ã‚Œã‚‰ã¯ `.env.local` ã«ä¿å­˜ã•ã‚Œã€Gitã«ã¯å«ã¾ã‚Œã¾ã›ã‚“ï¼ˆ.gitignoreï¼‰**

---

## ä»˜éŒ²A: ã‚³ãƒãƒ³ãƒ‰ãƒªãƒ•ã‚¡ãƒ¬ãƒ³ã‚¹

```bash
# === é–‹ç™º ===
npm run dev              # é–‹ç™ºã‚µãƒ¼ãƒãƒ¼èµ·å‹• (localhost:3000)
npm run build            # æœ¬ç•ªãƒ“ãƒ«ãƒ‰
npm run start            # æœ¬ç•ªãƒ¢ãƒ¼ãƒ‰ã§èµ·å‹•
npm run lint             # ESLint ãƒã‚§ãƒƒã‚¯

# === ãƒ‡ãƒ¼ã‚¿ãƒ™ãƒ¼ã‚¹ ===
npm run db:push          # ã‚¹ã‚­ãƒ¼ãƒã‚’ DB ã«é©ç”¨
npm run db:migrate       # ãƒã‚¤ã‚°ãƒ¬ãƒ¼ã‚·ãƒ§ãƒ³ä½œæˆãƒ»å®Ÿè¡Œ
npm run db:studio        # Prisma Studio èµ·å‹• (GUI)
npm run db:generate      # Prisma ã‚¯ãƒ©ã‚¤ã‚¢ãƒ³ãƒˆç”Ÿæˆ
npm run db:seed          # ã‚·ãƒ¼ãƒ‰ãƒ‡ãƒ¼ã‚¿æŠ•å…¥

# === Git ===
git status               # å¤‰æ›´ç¢ºèª
git add -A               # å…¨å¤‰æ›´ã‚’ã‚¹ãƒ†ãƒ¼ã‚¸ãƒ³ã‚°
git commit -m "message"  # ã‚³ãƒŸãƒƒãƒˆ
git push origin master   # ãƒ—ãƒƒã‚·ãƒ¥ï¼ˆãƒ‡ãƒ—ãƒ­ã‚¤ãƒˆãƒªã‚¬ãƒ¼ï¼‰
git pull origin master   # æœ€æ–°å–å¾—

# === ãƒˆãƒ©ãƒ–ãƒ«ã‚·ãƒ¥ãƒ¼ãƒ†ã‚£ãƒ³ã‚° ===
rm -rf node_modules package-lock.json && npm install  # ã‚¯ãƒªãƒ¼ãƒ³ã‚¤ãƒ³ã‚¹ãƒˆãƒ¼ãƒ«
rm -rf .next && npm run build                          # ãƒ“ãƒ«ãƒ‰ã‚­ãƒ£ãƒƒã‚·ãƒ¥ã‚¯ãƒªã‚¢
npx prisma generate                                    # Prisma å†ç”Ÿæˆ
```

---

**ãƒ‰ã‚­ãƒ¥ãƒ¡ãƒ³ãƒˆä½œæˆæ—¥**: 2025-11-19  
**æœ€çµ‚æ›´æ–°æ—¥**: 2025-11-19  
**ä½œæˆè€…**: Claude Code  
**ãƒãƒ¼ã‚¸ãƒ§ãƒ³**: 1.0.0

---

## æ›´æ–°å±¥æ­´

| æ—¥ä»˜ | ç‰ˆ | å¤‰æ›´å†…å®¹ | æ‹…å½“è€… |
|------|---|---------|--------|
| 2025-11-19 | 1.0.0 | åˆç‰ˆä½œæˆ | Claude |

---

**ã“ã®ãƒ‰ã‚­ãƒ¥ãƒ¡ãƒ³ãƒˆã«ã¤ã„ã¦**:
- æ–°è¦é–‹ç™ºè€…ãŒãƒ—ãƒ­ã‚¸ã‚§ã‚¯ãƒˆã‚’å¼•ãç¶™ããŸã‚ã«å¿…è¦ãªå…¨æƒ…å ±ã‚’è¨˜è¼‰
- å®šæœŸçš„ã«æ›´æ–°ã—ã€æœ€æ–°çŠ¶æ…‹ã‚’ä¿ã¤ã“ã¨
- ä¸æ˜ç‚¹ãŒã‚ã‚Œã°ã€GitHub ã® Issues ã§è³ªå•æ¨å¥¨
